# =============================================================================
# VeloDoc — Environment variables (copy to .env and fill in)
# =============================================================================

# Clerk — https://dashboard.clerk.com → API Keys + Webhooks
# Production: use the Production instance keys (pk_live_... / sk_live_...). Do not use Development (pk_test_ / sk_test_) in production or you may see "Invalid Password" / OAuth errors.
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
CLERK_WEBHOOK_SIGNING_SECRET=whsec_...

# Database — Prisma Postgres (required for Netlify; use Supabase Postgres)
# Recommended: create a dedicated "prisma" user in Supabase (see docs/DATABASE.md) to avoid P1000 auth issues with the pooler.
# Session pooler format (port 5432): postgresql://[user].[project-ref]:[password]@aws-1-us-east-1.pooler.supabase.com:5432/postgres
# If password has $ or other special chars, URL-encode: $ → %24, # → %23, @ → %40, % → %25
# Then run: npx prisma db push
DATABASE_URL="postgresql://prisma.[project-ref]:[PRISMA-PASSWORD]@aws-1-us-east-1.pooler.supabase.com:5432/postgres"

# OpenAI — https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Stripe — https://dashboard.stripe.com/apikeys + Webhooks
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
# Stripe Price IDs (from VeloDoc Stripe products) — maps UI pricing cards to products
STRIPE_PRICE_ID_STARTER=
STRIPE_PRICE_ID_PRO=
STRIPE_PRICE_ID_ENTERPRISE=
# Top-up credits: one-time payment via POST /api/checkout/topup (adds to credits_topup_remaining). No Price ID required.
# Billing contact for checkout session metadata (billing queries)
BILLING_CONTACT_EMAIL=billing@velodoc.app
BILLING_CONTACT_NAME=Alissa Wilson
# Stripe/checkout support and reply-to (used in branding and SendGrid emails)
STRIPE_SUPPORT_EMAIL=billing@velodoc.app
REPLY_TO=billing@velodoc.app

# App URL (production)
NEXT_PUBLIC_APP_URL=https://velodoc.app

# SendGrid — transactional email. Use same key as Supabase if configured there. Full Access required.
# Verified senders (set in SendGrid/Supabase): billing@, sales@, support@, admin@velodoc.app
# Billing: Stripe welcome/refill, receipts. Sales: Monday Precision Report, Upgrade/lead. Support: Password reset, signup, tickets. Admin: system alerts.
SENDGRID_API_KEY=SG....
# Optional: for POST /api/test-emails (verify all four departmental senders)
TEST_EMAIL_TO=jasonlaceyyy8638@gmail.com
# TEST_EMAIL_SECRET=optional-secret-to-call-test-emails

# Weekly sync report cron — only the scheduler should call /api/cron/weekly-report
# Set a long random secret and pass it as Authorization: Bearer <CRON_SECRET> or x-cron-secret header
CRON_SECRET=
# Admin recipient for the weekly CSV (default admin@velodoc.app)
WEEKLY_REPORT_EMAIL=admin@velodoc.app
# Error logs from QuickBooks disconnect/callback failures
ADMIN_EMAIL=admin@velodoc.app
# /admin dashboard: only the user whose email matches ADMIN_EMAIL can access /admin (e.g. jasonlaceyyy8638@gmail.com). If unset, defaults to jasonlaceyyy8638@gmail.com.
# From addresses are fixed in code to verified departmental only: support@, billing@, sales@, admin@velodoc.app (no overrides)
# Review request (at 10 syncs): feedback form link in email
# FEEDBACK_FORM_URL=https://velodoc.app/feedback
# Optional: secret for Supabase webhook POST /api/webhooks/review-request
# REVIEW_WEBHOOK_SECRET=

# Supabase — https://supabase.com/dashboard → Project Settings → API
NEXT_PUBLIC_SUPABASE_URL=https://xxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJ...  # or SUPABASE_ANON_KEY if using RLS

# QuickBooks (Intuit) — OAuth; set in Netlify to match Intuit Portal Redirect URI exactly
# Must match Intuit Portal Redirect URI exactly (e.g. https://velodoc.app/api/auth/callback/quickbooks)
# QUICKBOOKS_REDIRECT_URI=https://velodoc.app/api/auth/callback/quickbooks
# QUICKBOOKS_CLIENT_ID=
# QUICKBOOKS_CLIENT_SECRET=

# Optional: Chatbase
# NEXT_PUBLIC_CHATBOT_ID=
